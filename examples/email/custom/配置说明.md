# 自定义邮件配置：发件人和收件人设置指南

## 📧 1. 发件人配置 (Sender Configuration)

在 `main.go` 中修改 `CustomEmailConfig` 结构体：

```go
customConfig := &email.CustomEmailConfig{
    // 🏷️ 基础发件人信息
    From:     "your-email@company.com",     // 发件人邮箱地址 (必填)
    FromName: "Your Display Name",          // 发件人显示名称 (可选)
    Username: "your-email@company.com",     // SMTP认证用户名 (必填)
    Password: "your-app-password",          // 邮箱密码 (必填)

    // 🌐 SMTP服务器设置
    Host: "smtp.company.com",               // SMTP服务器地址 (必填)
    Port: 587,                              // SMTP端口 (必填)

    // 🔒 安全设置
    UseStartTLS: true,                      // 推荐启用STARTTLS
    UseTLS:      false,                     // 根据服务商要求

    // 📧 可选的高级设置
    ReplyToAddress: "noreply@company.com",  // 回复地址
    BounceAddress:  "bounce@company.com",   // 退信地址
}
```

### 常见邮件服务商配置

#### Gmail 配置
```go
customConfig := &email.CustomEmailConfig{
    Host:        "smtp.gmail.com",
    Port:        587,
    Username:    "your-email@gmail.com",
    Password:    "your-app-password",      // 使用应用专用密码
    From:        "your-email@gmail.com",
    UseStartTLS: true,
}
```

#### 163邮箱配置
```go
customConfig := &email.CustomEmailConfig{
    Host:        "smtp.163.com",
    Port:        25,                       // 或587
    Username:    "your-email@163.com",
    Password:    "your-auth-code",         // 使用授权码
    From:        "your-email@163.com",
    UseStartTLS: true,
}
```

#### QQ邮箱配置
```go
customConfig := &email.CustomEmailConfig{
    Host:        "smtp.qq.com",
    Port:        587,
    Username:    "your-email@qq.com",
    Password:    "your-auth-code",         // 使用授权码
    From:        "your-email@qq.com",
    UseStartTLS: true,
}
```

## 📧 2. 收件人配置 (Recipients Configuration)

收件人在 `CustomEmailOptions` 中设置：

```go
options := &email.CustomEmailOptions{
    Recipients: []string{
        "user1@company.com",
        "user2@partner.com",
        "user3@gmail.com",
    },
    Subject:  "邮件主题",
    Body:     "邮件内容",
    // ... 其他选项
}
```

### 收件人配置示例

#### 基础收件人设置
```go
options := &email.CustomEmailOptions{
    Recipients: []string{
        "manager@company.com",
        "developer@company.com",
    },
    Subject: "测试邮件",
    Body:    "这是一封测试邮件",
}
```

#### 批量收件人设置
```go
var recipients []string
// 添加多个收件人
for i := 1; i <= 100; i++ {
    recipients = append(recipients, fmt.Sprintf("user%d@company.com", i))
}

options := &email.CustomEmailOptions{
    Recipients: recipients,
    Template:   "newsletter",  // 使用模板
    Variables: map[string]interface{}{
        "company": "Your Company",
        "month":   "12月",
    },
}
```

#### 分批发送 (推荐大量邮件时使用)
```go
batchSize := 50
allRecipients := []string{/* 所有收件人 */}

for i := 0; i < len(allRecipients); i += batchSize {
    end := i + batchSize
    if end > len(allRecipients) {
        end = len(allRecipients)
    }

    batchOptions := &email.CustomEmailOptions{
        Recipients: allRecipients[i:end],
        Subject:    "批量邮件",
        Body:       "邮件内容",
    }

    result, err := sender.SendCustomEmail(ctx, batchOptions)
    // 处理结果...
}
```

## 🔧 3. 修改现有的main.go

在 `examples/email/custom/main.go` 中找到这些位置并修改：

### 修改发件人配置 (第51-82行)
```go
customConfig := &email.CustomEmailConfig{
    // 🔧 修改这些值为您的实际配置
    Host:        "YOUR_SMTP_HOST",          // 如: smtp.gmail.com
    Port:        587,                       // 根据服务商调整
    Username:    "YOUR_EMAIL@DOMAIN.COM",   // 您的邮箱
    Password:    "YOUR_PASSWORD",           // 您的密码/授权码
    From:        "YOUR_EMAIL@DOMAIN.COM",   // 发件人地址
    FromName:    "YOUR_DISPLAY_NAME",       // 显示名称
    // ... 其他配置保持不变
}
```

### 修改收件人配置 (第173行)
```go
Recipients: []string{
    "recipient1@example.com",  // 🔧 修改为实际收件人
    "recipient2@example.com",  // 🔧 添加更多收件人
},
```

## ⚠️ 重要注意事项

1. **密码安全**:
   - Gmail: 使用应用专用密码，不是登录密码
   - 163/QQ: 使用授权码，需要在邮箱设置中开启SMTP并生成

2. **端口选择**:
   - 587: STARTTLS (推荐)
   - 465: SSL/TLS
   - 25: 明文或STARTTLS (部分服务商)

3. **域名验证**: 发件人域名要与SMTP服务器匹配

4. **频率限制**: 大部分邮件服务商都有发送频率限制

## 🚀 快速测试

修改配置后，运行示例：

```bash
cd examples/email/custom
go run main.go template-demo.go
```

或运行配置示例：

```bash
go run config-example.go
```