# 工具和调试

这个目录包含用于调试、测试和诊断 NotifyHub 飞书集成的各种工具。

## 🛠️ 工具列表

### `debug/` - 网络调试工具
直接HTTP请求测试工具，用于诊断网络连接和签名验证问题。

**功能特性：**
- 直接发送 HTTP 请求到飞书 API
- 测试 webhook 连通性
- 验证签名算法正确性
- 详细的请求/响应日志输出

**使用场景：**
- 网络连接问题排查
- 签名验证调试
- API 响应分析
- 性能测试

**运行方式：**
```bash
cd debug
export FEISHU_WEBHOOK_URL="你的飞书webhook地址"
export FEISHU_SECRET="你的签名密钥"  # 可选
go run main.go
```

### `test/` - 集成测试工具
完整的 NotifyHub 集成测试工具，验证系统整体功能。

**功能特性：**
- NotifyHub 完整集成测试
- 系统健康检查
- 全面的错误诊断
- 性能基准测试

**使用场景：**
- 部署前验证
- 配置正确性检查
- 性能监控
- 回归测试

**运行方式：**
```bash
cd test
export FEISHU_WEBHOOK_URL="你的飞书webhook地址"
export FEISHU_SECRET="你的签名密钥"  # 可选
go run main.go
```

## 🚨 故障排查流程

### 1. 网络连通性检查
```bash
# 首先使用 debug 工具测试基本连接
cd tools/debug
go run main.go
```

### 2. 认证问题诊断
```bash
# 检查签名验证是否正确
# debug 工具会显示详细的签名生成过程
```

### 3. 集成测试验证
```bash
# 使用 test 工具进行完整功能验证
cd tools/test
go run main.go
```

### 4. 日志分析
- 检查 debug 工具输出的详细日志
- 分析响应状态码和错误信息
- 验证请求格式是否正确

## 📊 性能基准

这些工具可以帮助你：
- 测量消息发送延迟
- 评估并发发送性能
- 监控错误率和重试情况
- 验证资源使用情况

## 🔧 独立模块说明

`debug` 和 `test` 目录都包含独立的 `go.mod` 文件，因为：
- 可能需要特定的依赖版本
- 独立部署和分发
- 避免与主项目依赖冲突
- 简化调试工具的维护

## 💡 使用建议

1. **开发阶段**: 经常使用 debug 工具验证配置
2. **测试阶段**: 使用 test 工具进行回归测试
3. **生产部署**: 定期运行健康检查
4. **问题排查**: 按照故障排查流程逐步诊断