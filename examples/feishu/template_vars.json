{
  "description": "飞书推送示例模板变量定义",
  "templates": {
    "alert": {
      "description": "告警消息模板变量",
      "required_variables": [
        "severity",
        "service_name",
        "alert_type",
        "timestamp",
        "description"
      ],
      "optional_variables": [
        "duration",
        "affected_services",
        "metrics.cpu_usage",
        "metrics.memory_usage",
        "metrics.disk_usage",
        "dashboard_url",
        "runbook_url"
      ],
      "variable_types": {
        "severity": "string (critical|warning|info)",
        "service_name": "string",
        "alert_type": "string",
        "timestamp": "string (ISO 8601 format)",
        "duration": "string",
        "description": "string",
        "affected_services": "array of strings",
        "metrics": "object with numeric values",
        "dashboard_url": "string (URL)",
        "runbook_url": "string (URL)"
      },
      "example_data": {
        "severity": "critical",
        "service_name": "API Gateway",
        "alert_type": "High CPU Usage",
        "timestamp": "2024-09-26 15:30:00",
        "duration": "5分钟",
        "description": "CPU 使用率持续超过 90%",
        "affected_services": ["登录服务", "订单服务"],
        "metrics": {
          "cpu_usage": "94",
          "memory_usage": "78"
        },
        "dashboard_url": "https://monitor.example.com",
        "runbook_url": "https://docs.example.com/runbook"
      }
    },
    "system_status": {
      "description": "系统状态报告模板变量",
      "required_variables": [
        "report_date",
        "services",
        "server",
        "generated_at"
      ],
      "optional_variables": [
        "metrics",
        "incidents",
        "monitoring_url",
        "trends_url"
      ],
      "variable_types": {
        "report_date": "string (YYYY-MM-DD)",
        "services": "array of service objects",
        "server": "object with resource usage data",
        "metrics": "array of metric objects",
        "incidents": "array of incident objects",
        "generated_at": "string (ISO 8601 format)",
        "monitoring_url": "string (URL)",
        "trends_url": "string (URL)"
      }
    },
    "deployment": {
      "description": "部署通知模板变量",
      "required_variables": [
        "project_name",
        "environment",
        "version",
        "status"
      ],
      "optional_variables": [
        "deployer",
        "start_time",
        "end_time",
        "duration",
        "changes",
        "health_checks",
        "approver",
        "logs_url",
        "monitoring_url"
      ],
      "variable_types": {
        "project_name": "string",
        "environment": "string (development|staging|production)",
        "version": "string",
        "status": "string (started|success|failed|rolled_back)",
        "deployer": "string",
        "start_time": "string (timestamp)",
        "end_time": "string (timestamp)",
        "duration": "string",
        "changes": "array of change objects",
        "health_checks": "array of check objects",
        "approver": "string",
        "logs_url": "string (URL)",
        "monitoring_url": "string (URL)"
      }
    },
    "user_activity": {
      "description": "用户活动通知模板变量 (Mustache 引擎)",
      "required_variables": [
        "user",
        "activity"
      ],
      "optional_variables": [
        "security_alert",
        "details_url",
        "security_url"
      ],
      "variable_types": {
        "user": "object with name and email",
        "activity": "object with type, timestamp and specific data",
        "security_alert": "object with risk info",
        "details_url": "string (URL)",
        "security_url": "string (URL)"
      },
      "mustache_sections": [
        "activity.login",
        "activity.permission_change",
        "activity.data_access",
        "activity.api_usage",
        "security_alert",
        "sensitive",
        "api.rate_limit_exceeded"
      ]
    }
  },
  "common_functions": {
    "go_template": [
      "upper - 转换为大写",
      "lower - 转换为小写",
      "title - 转换为标题格式",
      "eq - 相等比较",
      "ne - 不等比较",
      "range - 遍历数组/切片"
    ],
    "mustache": [
      "{{#section}} - 条件渲染/循环",
      "{{^section}} - 反向条件",
      "{{&variable}} - 不转义输出",
      "{{!comment}} - 注释"
    ]
  }
}